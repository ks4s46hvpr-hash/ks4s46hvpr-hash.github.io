<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¼ä¸šè´ºå¡ç”Ÿæˆå·¥å…·</title>
    <style>
        body { font-family: 'PingFang SC', 'Microsoft YaHei', sans-serif; display: flex; flex-direction: column; align-items: center; padding: 20px; background: #fdf2f2; }
        .box { background: white; padding: 30px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.08); width: 340px; text-align: center; margin-bottom: 20px; position: relative; }
        h2 { color: #c0392b; margin-top: 0; font-size: 22px; letter-spacing: 1px; }
        .input-group { margin: 20px 0; }
        input { padding: 14px; width: 85%; border: 2px solid #f5c6c6; border-radius: 10px; outline: none; font-size: 16px; transition: 0.3s; }
        input:focus { border-color: #e74c3c; box-shadow: 0 0 8px rgba(231,76,60,0.2); }
        button { padding: 14px; background: #e74c3c; color: white; border: none; border-radius: 10px; cursor: pointer; width: 95%; font-weight: bold; font-size: 16px; transition: 0.2s; }
        button:active { transform: scale(0.98); background: #c0392b; }
        
        #previewCanvas { max-width: 100%; border-radius: 12px; box-shadow: 0 8px 25px rgba(0,0,0,0.15); display: none; margin-top: 20px; }
        
        .copyright { margin-top: 25px; font-size: 11px; color: #999; letter-spacing: 0.5px; }
        .tip { font-size: 13px; color: #e67e22; margin-top: 15px; font-weight: 500; }
    </style>
</head>
<body>
    <div class="box">
        <h2>ğŸ§§ ä¼ä¸šè´ºå¡åˆ¶ä½œå·¥å…·</h2>
        <div class="input-group">
            <input type="text" id="custName" placeholder="è¯·è¾“å…¥å®¢æˆ·å§“å (å¦‚: ç‹æ€»)">
        </div>
        <button onclick="generateAndDownload()">ç”Ÿæˆå¹¶ä¿å­˜è´ºå¡å›¾ç‰‡</button>
        <p id="statusTip" class="tip" style="display:none;">âœ… ç”ŸæˆæˆåŠŸï¼å›¾ç‰‡å·²è‡ªåŠ¨ä¸‹è½½</p>
        
        <!-- åº•éƒ¨ç‰ˆæƒå£°æ˜ -->
        <div class="copyright">xyx@zjqcåˆ¶ä½œï¼Œä»…ä¾›2026æ˜¥èŠ‚ä¼ä¸šé—®å€™ä½¿ç”¨</div>
    </div>

    <!-- éšè—çš„ç”»å¸ƒï¼Œç”¨äºåˆæˆå›¾ç‰‡ -->
    <canvas id="previewCanvas"></canvas>

    <script>
        async function generateAndDownload() {
            const name = document.getElementById('custName').value;
            if(!name) return alert('è¯·å…ˆè¾“å…¥å®¢æˆ·å§“å');

            const canvas = document.getElementById('previewCanvas');
            const ctx = canvas.getContext('2d');
            
            // åŠ è½½åº•å›¾
            const img = new Image();
            img.crossOrigin = "anonymous"; 
            // è·¯å¾„æŒ‡å‘ä½ ä¸Šä¼ åˆ°ä»“åº“é‡Œçš„ bg.jpg
            img.src = "bg.jpg"; 

            img.onload = function() {
                // 1. è®¾ç½®ç”»å¸ƒå¤§å°ä¸åŸå›¾ä¸€è‡´
                canvas.width = img.width;
                canvas.height = img.height;
                
                // 2. ç»˜åˆ¶åº•å›¾
                ctx.drawImage(img, 0, 0);

                // 3. é…ç½®æ–‡å­—æ ·å¼
                // å­—å·æ ¹æ®å›¾ç‰‡å®½åº¦åŠ¨æ€è°ƒæ•´ (å®½åº¦ 10%)
                const fontSize = Math.floor(canvas.width * 0.08); 
                ctx.fillStyle = "#D4AF37"; // é»˜è®¤é‡‘è‰²ï¼Œå¯æ ¹æ®éœ€è¦æ”¹ä¸º #FFFFFF (ç™½è‰²)
                ctx.font = `bold ${fontSize}px "Microsoft YaHei", sans-serif`;
                ctx.textAlign = "center";
                ctx.textBaseline = "middle";

                // 4. å†™å…¥å§“å (æ ¸å¿ƒï¼šä¿®æ”¹åæ ‡å¯¹é½ç©ºç™½å¤„)
                // è¿™é‡Œçš„ 0.45 ä»£è¡¨åœ¨å›¾ç‰‡é«˜åº¦ 45% çš„ä½ç½®ï¼Œä½ å¯ä»¥æ ¹æ®è®¾è®¡ç¨¿å¾®è°ƒ
                const textY = canvas.height * 0.45; 
                ctx.fillText(name, canvas.width / 2, textY);

                // 5. æ˜¾ç¤ºå¹¶è§¦å‘ä¿å­˜
                canvas.style.display = "block";
                document.getElementById('statusTip').style.display = "block";

                // å¯¼å‡ºå›¾ç‰‡
                const dataURL = canvas.toDataURL('image/jpeg', 0.95);
                const link = document.createElement('a');
                link.download = `è´ºå¡_${name}_2026.jpg`;
                link.href = dataURL;
                link.click();
            };

            img.onerror = function() {
                alert("é”™è¯¯ï¼šåœ¨å½“å‰ç›®å½•ä¸‹æœªæ‰¾åˆ° bg.jpgã€‚è¯·ç¡®è®¤å·²å°†è®¾è®¡å¥½çš„åº•å›¾ä¸Šä¼ è‡³ GitHub ä»“åº“çš„ card æ–‡ä»¶å¤¹ä¸­ã€‚");
            };
        }
    </script>
</body>
</html>
